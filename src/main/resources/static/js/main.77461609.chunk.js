(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{12:function(e,t,s){},20:function(e,t,s){},22:function(e,t,s){},23:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(13),r=s.n(c),i=s(2),l=s(3),o=s.n(l),d=s(5),j=s(4),m=s.n(j),b=(s(20),s(6)),x=s(0);var u=function(e){var t,s,a=e.setLogin,n={id:"",name:"",password:"",userName:"",friends:[],messages:[],groups:[],avatar:""},c="";return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{style:{position:"relative",top:"2rem",fontFamily:"monospace"},className:"registerContainer",children:Object(x.jsx)("div",{className:"col-lg-12 col-xl-11",children:Object(x.jsx)("div",{className:"card text-black",style:{position:"relative",top:"2rem",backgroundColor:"#2D4263",color:"white"},children:Object(x.jsx)("div",{className:"card-body p-md-5",children:Object(x.jsxs)("div",{className:"row justify-content-center",children:[Object(x.jsxs)("div",{className:"col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1",children:[Object(x.jsx)("p",{className:"text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4",children:"Sign up"}),Object(x.jsxs)("form",{className:"mx-1 mx-md-4",children:[Object(x.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(x.jsx)("i",{className:"fas fa-user fa-lg me-3 fa-fw"}),Object(x.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(x.jsx)("input",{onChange:function(e){n.name=e.target.value},type:"text",id:"form3Example1c register-name",className:"form-control"}),Object(x.jsx)("label",{className:"form-label",for:"form3Example1c",children:"Your Name"})]})]}),Object(x.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(x.jsx)("i",{className:"fas fa-envelope fa-lg me-3 fa-fw"}),Object(x.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(x.jsx)("input",{onKeyDown:function(e){n.userName=e.target.value},type:"text",id:"form3Example3c register-user-name",className:"form-control"}),Object(x.jsx)("label",{className:"form-label",for:"form3Example3c",children:"Enter username"})]})]}),Object(x.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(x.jsx)("i",{className:"fas fa-envelope fa-lg me-3 fa-fw"}),Object(x.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(x.jsx)("input",(t={onChange:function(e){n.id=e.target.value},id:"register-id",type:"number"},Object(b.a)(t,"id","form3Example3c register-id"),Object(b.a)(t,"className","form-control"),t)),Object(x.jsx)("label",{className:"form-label",for:"form3Example3c",children:"Enter ID"})]})]}),Object(x.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(x.jsx)("i",{className:"fas fa-envelope fa-lg me-3 fa-fw"}),Object(x.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(x.jsx)("input",(s={onChange:function(e){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onloadend=function(){n.avatar=t.result}},id:"registerFile",type:"file"},Object(b.a)(s,"id","form3Example3c"),Object(b.a)(s,"className","form-control"),s)),Object(x.jsx)("label",{className:"form-label",for:"form3Example3c",children:"Avatar"})]})]}),Object(x.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(x.jsx)("i",{className:"fas fa-lock fa-lg me-3 fa-fw"}),Object(x.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(x.jsx)("input",{onChange:function(e){n.password=e.target.value},type:"password",id:"form3Example4c register-password",className:"form-control"}),Object(x.jsx)("label",{className:"form-label",for:"form3Example4c",children:"Password"})]})]}),Object(x.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(x.jsx)("i",{className:"fas fa-key fa-lg me-3 fa-fw"}),Object(x.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(x.jsx)("input",{onChange:function(e){c=e.target.value},type:"password",id:"form3Example4cd register-password2",className:"form-control"}),Object(x.jsx)("label",{className:"form-label",for:"form3Example4cd",children:"Repeat your password"})]})]}),Object(x.jsxs)("div",{className:"d-flex justify-content-center mx-4 mb-3 mb-lg-4",children:[Object(x.jsx)("button",{onClick:Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.password!==c){e.next=6;break}return e.next=3,fetch("http://localhost:8080/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:e.sent,e.next=7;break;case 6:alert("Passwords do not match");case 7:case"end":return e.stop()}}),e)}))),type:"button",className:"btn btn-primary btn-lg",children:"Register"}),Object(x.jsx)("button",{onClick:function(){a(!0)},className:"btn btn-dark",style:{padding:"0.5rem",marginLeft:"1rem"},children:"Go to login"})]})]})]}),Object(x.jsx)("div",{className:"col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2",children:Object(x.jsx)("img",{style:{borderRadius:"25px"},src:"https://i.pinimg.com/originals/b0/ac/57/b0ac5722ccc9acf10bb560e0dfe420a6.png",className:"img-fluid",alt:"Sample image"})})]})})})})})})};var p=function(){var e=n.a.useState(!0),t=Object(i.a)(e,2),s=t[0],a=t[1];return Object(x.jsx)(x.Fragment,{children:s?Object(x.jsxs)("div",{id:"logingPage",className:"loginBox",children:[Object(x.jsx)("img",{className:"user",src:"https://i.ibb.co/yVGxFPR/2.png",height:"100px",width:"100px"}),Object(x.jsx)("h3",{children:"Sign in here"}),Object(x.jsxs)("form",{className:"form-group",onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){var s,a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=m()("#username").val(),a=m()("#password").val(),e.next=5,fetch("http://localhost:8080/signin/"+s+"/"+a);case 5:return n=e.sent,e.next=8,n.json();case 8:"invalid username or password"===(c=e.sent).response?alert("invalid username or password"):(localStorage.setItem("jwt",c.response),window.location.reload());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(x.jsxs)("div",{className:"inputBox",children:[Object(x.jsx)("input",{style:{borderRadius:"10px",border:"1px solid #ccc",paddingLeft:"10px",paddingRight:"10px",paddingTop:"5px",paddingBottom:"5px",width:"100%",height:"40px"},id:"username",type:"text",name:"Username",placeholder:"Username"}),Object(x.jsx)("input",{style:{borderRadius:"10px",border:"1px solid #ccc",paddingLeft:"10px",paddingRight:"10px",paddingTop:"5px",paddingBottom:"5px",width:"100%",height:"40px"},id:"password",type:"password",name:"Password",placeholder:"Password"})]}),Object(x.jsx)("input",{type:"submit",name:"",value:"Login"})]})," ",Object(x.jsxs)("a",{href:"#",children:["Forget Password",Object(x.jsx)("br",{})," "]}),Object(x.jsx)("div",{className:"text-center",children:Object(x.jsx)("button",{onClick:function(){a(!1)},className:"btn btn-link",style:{color:"white",fontSize:"20px",fontWeight:"bold",marginTop:"10px",float:"left",padding:"10px",textAlign:"left",border:"none",borderRadius:"10px",textUnderlinePosition:"under"},children:"Sign-Up"})})]}):Object(x.jsx)("div",{style:{position:"relative",paddingBottom:"100px"},className:"container RegisterUser-container",children:Object(x.jsx)(u,{setLogin:a})})})},f=(s(12),Object(a.createContext)()),h=function(e){var t=e.children,s=Object(a.useState)({}),c=Object(i.a)(s,2),r=c[0],l=c[1],j=Object(a.useState)(""),m=Object(i.a)(j,2),b=m[0],u=m[1],p=Object(a.useState)({}),h=Object(i.a)(p,2),O=h[0],g=h[1],v=Object(a.useState)(null),N=Object(i.a)(v,2),y=N[0],w=N[1],S=Object(a.useState)([]),C=Object(i.a)(S,2),k=C[0],F=C[1],E=Object(a.useState)([]),U=Object(i.a)(E,2),I=U[0],D=U[1];return null!=y&&(y.onopen=function(){y.send("id-Client "+r.id)}),n.a.useEffect(Object(d.a)(o.a.mark((function e(){var t,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("jwt"),e.next=3,fetch("http://localhost:8080/user/"+t);case 3:return s=e.sent,e.next=6,s.json();case 6:a=e.sent,w(new WebSocket("ws://sleepy-woodland-84771.herokuapp.com/send")),l(a),D(a.friends);case 10:case"end":return e.stop()}}),e)}))),[]),window.onbeforeunload=function(){y.send("disconnect-client "+r.id)},Object(x.jsx)(f.Provider,{value:{user:r,setUser:l,userInputText:b,setUserInputText:u,messages:k,setMessages:F,connection:y,setConnection:w,currentFriend:O,setCurrentFriend:g,friends:I,setFriends:D},children:t})};var O=function(e){var t=e.message,s=n.a.useState(t),a=Object(i.a)(s,2),c=a[0];return a[1],Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("li",{className:"clearfix",children:[Object(x.jsx)("div",{className:"message-data",children:Object(x.jsx)("span",{className:"message-data-time",children:c.date})}),Object(x.jsx)("div",{className:"message my-message",children:c.content})]})})};var g=function(e){var t=e.message,s=n.a.useState(t),a=Object(i.a)(s,2),c=a[0];return a[1],Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("li",{className:"clearfix",children:[Object(x.jsx)("div",{className:"message-data text-right",children:Object(x.jsx)("span",{style:{fontSize:10},className:"message-data-time",children:c.date})}),Object(x.jsx)("div",{style:{backgroundColor:"#86c541"},className:"message other-message float-right my-message",children:c.content})]})})};var v=function(e){var t=e.userFriend,s=(e.index,n.a.useState(t)),a=Object(i.a)(s,2),c=a[0],r=(a[1],n.a.useContext(f).currentFriend);return Object(x.jsxs)("li",{onClick:function(){console.log(t.id,r.id)},className:r.id===t.id?"clearfix user-li active":"clearfix user-li",children:[Object(x.jsx)("img",{src:c.avatar,alt:"avatar"}),Object(x.jsxs)("div",{className:"about",children:[Object(x.jsx)("div",{className:"name",children:c.name}),Object(x.jsxs)("div",{className:"status",children:[Object(x.jsx)("i",{className:"fa fa-circle online"})," online"]})]})]})};var N=function(e){var t=e.user;return Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsx)("a",{href:"javascript:void(0);","data-toggle":"modal","data-target":"#view_info",children:Object(x.jsx)("img",{src:t.avatar,alt:"avatar"})}),Object(x.jsxs)("div",{className:"chat-about",children:[Object(x.jsx)("h6",{className:"m-b-0",children:t.name}),Object(x.jsx)("small",{children:"Last seen: 2 hours ago"})]})]})};var y=function(){return Object(x.jsx)("div",{children:Object(x.jsxs)("button",{onClick:function(){localStorage.removeItem("jwt"),window.location.reload()},className:"btn btn-outline-danger",children:[Object(x.jsx)("img",{style:{width:"25px",padding:"5px"},src:"/images/logoff.png"}),"Log Off"]})})};var w=function(){var e=Object(a.useContext)(f).user,t=n.a.useState(null),s=Object(i.a)(t,2),c=s[0],r=s[1];return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{style:{position:"relative",left:"-20px"},children:Object(x.jsxs)("div",{className:"input-group mb-3",children:[Object(x.jsx)("div",{className:"input-group-prepend",children:Object(x.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"ID"})}),Object(x.jsx)("input",{onChange:function(e){return r(e.target.value)},type:"text",className:"form-control",placeholder:"User ID","aria-label":"Username","aria-describedby":"basic-addon1"}),Object(x.jsx)("button",{onClick:Object(d.a)(o.a.mark((function t(){var s,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8080/delete-user/"+c,{method:"POST",headers:{"Content-Type":"application/json"},body:e.id});case 2:return s=t.sent,t.next=5,s.json();case 5:"User deleted"===(a=t.sent).response?window.location.reload():alert(a.response);case 7:case"end":return t.stop()}}),t)}))),style:{margin:"0 10px 0 10px",zIndex:"1"},className:"btn btn-danger",children:"Remove"})]})})})};var S=function(){var e=n.a.useState(!1),t=Object(i.a)(e,2),s=t[0],a=t[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsxs)("button",{onClick:function(){a(!s)},style:{margin:"0 10px 0 10px"},className:"btn btn-outline-warning",children:[Object(x.jsx)("img",{style:{width:"25px",padding:"2px",margin:"0 10px 0 0px"},src:"/images/remove.png"}),"Remove Friend"]})}),Object(x.jsx)("div",{style:{position:"absolute",top:"50px"},children:s?Object(x.jsx)(w,{}):Object(x.jsx)(x.Fragment,{})})]})};var C=function(){return Object(x.jsx)("div",{className:"col-lg-6 hidden-sm text-right",children:Object(x.jsxs)("div",{className:"d-flex flex-row-reverse",children:[Object(x.jsx)(y,{}),Object(x.jsx)(S,{})]})})},k=s(8),F=s(14),E=function e(t,s,a,n,c){Object(F.a)(this,e),this.id=t,this.content=s,this.MyUserID=a,this.date=n,this.userToID=c},U=(new E("","","","",""),new Date);U=U.toLocaleString("en-US",{dateStyle:"medium",timeStyle:"medium",hour12:!0});var I=function(e){e.messageData,e.setMessageData;var t=e.setMyFriend,s=e.myFriend,c=(e.setUser,Object(a.useContext)(f)),r=(c.messages,c.currentFriend),l=c.setCurrentFriend,o=c.connection,d=c.user,j=c.friends,m=c.setFriends,b=Object(a.useState)(""),u=Object(i.a)(b,2),p=u[0],h=u[1],O=Object(a.useState)(d.id),g=Object(i.a)(O,2),v=g[0],N=g[1];return n.a.useEffect((function(){null!=o&&(o.onmessage=function(e){var a=JSON.parse(e.data);if(r.id===a.MyUserID){var n=r;n.messages.push(a),t(Object(k.a)(Object(k.a)({},s),{},{messages:n.messages}))}}),N(d.id)}),[v,o,d,j,m,l,r]),Object(x.jsx)("div",{className:"chat-message clearfix",children:Object(x.jsxs)("div",{className:"input-group mb-0",children:[Object(x.jsx)("div",{className:"input-group-prepend",children:Object(x.jsx)("span",{className:"input-group-text",children:Object(x.jsx)("i",{className:"fa fa-send"})})}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter text here...",disabled:!r.id,onKeyPress:function(e){var a=new E("001",p,v,U,r.id);if(a.date=U,a.content=e.target.value,a.userToID=r.id,a.MyUserID=v,"Enter"===e.key){var n=r;n.messages.push(a),t(Object(k.a)(Object(k.a)({},s),{},{messages:n.messages})),o.send("request-send "+JSON.stringify(a)),e.target.value="",h("")}}})]})})};var D=function(){return Object(x.jsxs)("div",{className:"input-group",children:[Object(x.jsx)("div",{className:"input-group-prepend",children:Object(x.jsx)("span",{className:"input-group-text",children:Object(x.jsx)("i",{className:"fa fa-search"})})}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Search..."})]})};s(22);var R=function(e){var t=e.setVisibility,s=e.visibility,a=n.a.useContext(f).user,c=n.a.useState(a),r=Object(i.a)(c,2),l=r[0];r[1];var j,b={id:"",name:"",userName:"",messages:[],avatar:""};return j=function(){t(!s)},m()(document).mouseup((function(e){var t=m()("#prompt-add-user");t.is(e.target)||0!==t.has(e.target).length||j()})),Object(x.jsx)("div",{onClick:function(e){},children:Object(x.jsxs)("div",{id:"prompt-add-user",style:{position:"absolute"},children:[Object(x.jsx)("button",{onClick:function(){t(!s)},style:{borderRadius:"50%",position:"absolute",top:"-10px",right:"-10px"},className:"btn btn-danger",children:"X"}),Object(x.jsxs)("div",{style:{border:"3px solid gray"},className:"form",children:[Object(x.jsx)("div",{className:"title",children:"Add a user"}),Object(x.jsx)("div",{className:"subtitle",children:"Add your new friend"}),Object(x.jsxs)("div",{className:"input-container ic1",children:[Object(x.jsx)("input",{onChange:function(e){b.name=e.target.value},id:"firstname",className:"input",type:"text",placeholder:" "}),Object(x.jsx)("div",{className:"cut"}),Object(x.jsx)("label",{className:"placeholder",children:"Name"})]}),Object(x.jsxs)("div",{className:"input-container ic2",children:[Object(x.jsx)("input",{onChange:function(e){b.userName=e.target.value},id:"lastname",className:"input",type:"text",placeholder:" "}),Object(x.jsx)("div",{className:"cut"}),Object(x.jsx)("label",{className:"placeholder",children:"Username"})]}),Object(x.jsxs)("div",{className:"input-container ic2",children:[Object(x.jsx)("input",{onChange:function(e){b.id=e.target.value},id:"email",className:"input",type:"text",placeholder:" "}),Object(x.jsx)("div",{className:"cut"}),Object(x.jsx)("label",{className:"placeholder",children:"Friend ID"})]}),Object(x.jsxs)("button",{onClick:Object(d.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/add-friend/".concat(l.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});case 2:return a=e.sent,e.next=5,a.json();case 5:"Friend added"===e.sent.response&&window.location.reload(),t(!s);case 8:case"end":return e.stop()}}),e)}))),style:{position:"relative"},type:"text",className:"submit btn btn-danger",children:[Object(x.jsx)("img",{style:{height:28,position:"absolute",float:"left",left:"10px",filter:"invert(100%)",opacity:"0.9"},src:"/images/add2.png"}),"Add"]})]})]})})};var T=function(){var e,t=n.a.useState(!1),s=Object(i.a)(t,2),a=s[0],c=s[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{style:{position:"relative",top:"10px"},children:[Object(x.jsx)("button",(e={className:"addUser-btn",onClick:function(){c(!a),m()(".addUser-container").css({top:"-50px"}),m()(".addUser-container").animate({top:"50px"},"fast")}},Object(b.a)(e,"className","btn btn-link"),Object(b.a)(e,"children",Object(x.jsx)("img",{style:{height:28},src:"/images/add-button.png"})),e)),Object(x.jsx)("label",{style:{fontFamily:"Mali"},children:"add friend"})]}),Object(x.jsx)("div",{className:"addUser-container",style:{position:"absolute"},children:a&&Object(x.jsx)(R,{setVisibility:c,visibility:a})})]})};var P=function(){var e=Object(a.useContext)(f),t=e.user,s=e.id,c=e.setId,r=e.currentFriend,l=e.setCurrentFriend,j=n.a.useState(r),b=Object(i.a)(j,2),u=b[0],p=b[1],h=n.a.useState([]),y=Object(i.a)(h,2),w=y[0],S=y[1];return n.a.useEffect((function(){m()(".chat-history").animate({scrollTop:1e4},"slow")}),[s,c,u,p]),Object(x.jsx)("div",{children:Object(x.jsx)("div",{style:{position:"relative",top:"10vh"},className:"container",children:Object(x.jsx)("div",{className:"row clearfix ",children:Object(x.jsx)("div",{className:"col-lg-12",children:Object(x.jsxs)("div",{className:"card chat-app  chat-container",children:[Object(x.jsxs)("div",{id:"plist",className:"people-list",children:[Object(x.jsx)(D,{}),Object(x.jsx)(T,{}),Object(x.jsx)("ul",{className:"list-unstyled chat-list mt-2 mb-0",children:t.friends&&t.friends.map((function(e,s){return Object(x.jsx)("div",{onClick:Object(d.a)(o.a.mark((function s(){var a,n,c;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=localStorage.getItem("jwt"),s.next=3,fetch("http://localhost:8080/get-messages/".concat(a,"/").concat(t.id,"/").concat(e.id));case 3:return n=s.sent,s.next=6,n.json();case 6:c=s.sent,p(c),l(c);case 9:case"end":return s.stop()}}),s)}))),children:Object(x.jsx)(v,{userFriend:e})})}))})]}),Object(x.jsxs)("div",{className:"chat",children:[Object(x.jsx)("div",{className:"chat-header clearfix",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)(N,{user:t}),Object(x.jsx)(C,{})]})}),Object(x.jsx)("div",{className:"chat-history",children:Object(x.jsx)("ul",{className:"m-b-0  chat-box",children:u.messages&&u.messages.map((function(e){return e.userToID===t.id?Object(x.jsx)(O,{message:e}):Object(x.jsx)(g,{message:e})}))})}),Object(x.jsx)(I,{setMessageData:S,messageData:w,setMyFriend:p,myFriend:u})]})]})})})})})};s(11);var L={backgroundColor:"black",height:"200vh",top:-20,position:"relative"};var M=function(){var e=n.a.useState(""),t=Object(i.a)(e,2),s=t[0],a=t[1];return n.a.useEffect((function(){var e=localStorage.getItem("jwt");e&&a(e)}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{style:s?L:{},children:Object(x.jsxs)(h,{children:[s?Object(x.jsx)(P,{}):Object(x.jsx)(p,{}),Object(x.jsx)("div",{className:"container "})]})})})};r.a.render(Object(x.jsx)(M,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.77461609.chunk.js.map