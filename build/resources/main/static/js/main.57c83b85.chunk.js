(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{12:function(e,t,s){},20:function(e,t,s){},22:function(e,t,s){},23:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(13),r=s.n(n),i=s(2),l=s(3),o=s.n(l),d=s(5),j=s(4),m=s.n(j),b=(s(20),s(6)),u=s(0);var x=function(e){var t,s,a=e.setLogin,c={id:"",name:"",password:"",userName:"",friends:[],messages:[],groups:[],avatar:""},n="";return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{style:{position:"relative",top:"2rem",fontFamily:"monospace"},className:"registerContainer",children:Object(u.jsx)("div",{className:"col-lg-12 col-xl-11",children:Object(u.jsx)("div",{className:"card text-black",style:{position:"relative",top:"2rem",backgroundColor:"#2D4263",color:"white"},children:Object(u.jsx)("div",{className:"card-body p-md-5",children:Object(u.jsxs)("div",{className:"row justify-content-center",children:[Object(u.jsxs)("div",{className:"col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1",children:[Object(u.jsx)("p",{className:"text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4",children:"Sign up"}),Object(u.jsxs)("form",{className:"mx-1 mx-md-4",children:[Object(u.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(u.jsx)("i",{className:"fas fa-user fa-lg me-3 fa-fw"}),Object(u.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(u.jsx)("input",{onChange:function(e){c.name=e.target.value},type:"text",id:"form3Example1c register-name",className:"form-control"}),Object(u.jsx)("label",{className:"form-label",for:"form3Example1c",children:"Your Name"})]})]}),Object(u.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(u.jsx)("i",{className:"fas fa-envelope fa-lg me-3 fa-fw"}),Object(u.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(u.jsx)("input",{onKeyDown:function(e){c.userName=e.target.value},type:"text",id:"form3Example3c register-user-name",className:"form-control"}),Object(u.jsx)("label",{className:"form-label",for:"form3Example3c",children:"Enter username"})]})]}),Object(u.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(u.jsx)("i",{className:"fas fa-envelope fa-lg me-3 fa-fw"}),Object(u.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(u.jsx)("input",(t={onChange:function(e){c.id=e.target.value},id:"register-id",type:"number"},Object(b.a)(t,"id","form3Example3c register-id"),Object(b.a)(t,"className","form-control"),t)),Object(u.jsx)("label",{className:"form-label",for:"form3Example3c",children:"Enter ID"})]})]}),Object(u.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(u.jsx)("i",{className:"fas fa-envelope fa-lg me-3 fa-fw"}),Object(u.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(u.jsx)("input",(s={onChange:function(e){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onloadend=function(){c.avatar=t.result}},id:"registerFile",type:"file"},Object(b.a)(s,"id","form3Example3c"),Object(b.a)(s,"className","form-control"),s)),Object(u.jsx)("label",{className:"form-label",for:"form3Example3c",children:"Avatar"})]})]}),Object(u.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(u.jsx)("i",{className:"fas fa-lock fa-lg me-3 fa-fw"}),Object(u.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(u.jsx)("input",{onChange:function(e){c.password=e.target.value},type:"password",id:"form3Example4c register-password",className:"form-control"}),Object(u.jsx)("label",{className:"form-label",for:"form3Example4c",children:"Password"})]})]}),Object(u.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(u.jsx)("i",{className:"fas fa-key fa-lg me-3 fa-fw"}),Object(u.jsxs)("div",{className:"form-outline flex-fill mb-0",children:[Object(u.jsx)("input",{onChange:function(e){n=e.target.value},type:"password",id:"form3Example4cd register-password2",className:"form-control"}),Object(u.jsx)("label",{className:"form-label",for:"form3Example4cd",children:"Repeat your password"})]})]}),Object(u.jsxs)("div",{className:"d-flex justify-content-center mx-4 mb-3 mb-lg-4",children:[Object(u.jsx)("button",{onClick:Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.password!==n){e.next=6;break}return e.next=3,fetch("http://localhost:8080/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:e.sent,e.next=7;break;case 6:alert("Passwords do not match");case 7:case"end":return e.stop()}}),e)}))),type:"button",className:"btn btn-primary btn-lg",children:"Register"}),Object(u.jsx)("button",{onClick:function(){a(!0)},className:"btn btn-dark",style:{padding:"0.5rem",marginLeft:"1rem"},children:"Go to login"})]})]})]}),Object(u.jsx)("div",{className:"col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2",children:Object(u.jsx)("img",{style:{borderRadius:"25px"},src:"https://i.pinimg.com/originals/b0/ac/57/b0ac5722ccc9acf10bb560e0dfe420a6.png",className:"img-fluid",alt:"Sample image"})})]})})})})})})};var p=function(){var e=c.a.useState(!0),t=Object(i.a)(e,2),s=t[0],a=t[1];return Object(u.jsx)(u.Fragment,{children:s?Object(u.jsxs)("div",{id:"logingPage",className:"loginBox",children:[Object(u.jsx)("img",{className:"user",src:"https://i.ibb.co/yVGxFPR/2.png",height:"100px",width:"100px"}),Object(u.jsx)("h3",{children:"Sign in here"}),Object(u.jsxs)("form",{className:"form-group",onSubmit:function(){var e=Object(d.a)(o.a.mark((function e(t){var s,a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=m()("#username").val(),a=m()("#password").val(),e.next=5,fetch("http://localhost:8080/signin/"+s+"/"+a);case 5:return c=e.sent,e.next=8,c.json();case 8:"invalid username or password"===(n=e.sent).response?alert("invalid username or password"):(localStorage.setItem("jwt",n.response),window.location.reload());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(u.jsxs)("div",{className:"inputBox",children:[Object(u.jsx)("input",{style:{borderRadius:"10px",border:"1px solid #ccc",paddingLeft:"10px",paddingRight:"10px",paddingTop:"5px",paddingBottom:"5px",width:"100%",height:"40px"},id:"username",type:"text",name:"Username",placeholder:"Username"}),Object(u.jsx)("input",{style:{borderRadius:"10px",border:"1px solid #ccc",paddingLeft:"10px",paddingRight:"10px",paddingTop:"5px",paddingBottom:"5px",width:"100%",height:"40px"},id:"password",type:"password",name:"Password",placeholder:"Password"})]}),Object(u.jsx)("input",{type:"submit",name:"",value:"Login"})]})," ",Object(u.jsxs)("a",{href:"#",children:["Forget Password",Object(u.jsx)("br",{})," "]}),Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)("button",{onClick:function(){a(!1)},className:"btn btn-link",style:{color:"white",fontSize:"20px",fontWeight:"bold",marginTop:"10px",float:"left",padding:"10px",textAlign:"left",border:"none",borderRadius:"10px",textUnderlinePosition:"under"},children:"Sign-Up"})})]}):Object(u.jsx)("div",{style:{position:"relative",paddingBottom:"100px"},className:"container RegisterUser-container",children:Object(u.jsx)(x,{setLogin:a})})})},f=(s(12),Object(a.createContext)()),h=function(e){var t=e.children,s=Object(a.useState)({}),n=Object(i.a)(s,2),r=n[0],l=n[1],j=Object(a.useState)(""),m=Object(i.a)(j,2),b=m[0],x=m[1],p=Object(a.useState)({}),h=Object(i.a)(p,2),O=h[0],g=h[1],v=Object(a.useState)(null),N=Object(i.a)(v,2),y=N[0],w=N[1],S=Object(a.useState)([]),C=Object(i.a)(S,2),k=C[0],F=C[1],E=Object(a.useState)([]),U=Object(i.a)(E,2),D=U[0],I=U[1];return null!=y&&(y.onopen=function(){y.send("id-Client "+r.id)}),c.a.useEffect(Object(d.a)(o.a.mark((function e(){var t,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("jwt"),e.next=3,fetch("http://localhost:8080/user/"+t);case 3:return s=e.sent,e.next=6,s.json();case 6:a=e.sent,w(new WebSocket("ws://localhost:8080/send")),l(a),I(a.friends);case 10:case"end":return e.stop()}}),e)}))),[]),window.onbeforeunload=function(){y.send("disconnect-client "+r.id)},Object(u.jsx)(f.Provider,{value:{user:r,setUser:l,userInputText:b,setUserInputText:x,messages:k,setMessages:F,connection:y,setConnection:w,currentFriend:O,setCurrentFriend:g,friends:D,setFriends:I},children:t})};var O=function(e){var t=e.message,s=c.a.useState(t),a=Object(i.a)(s,2),n=a[0];return a[1],Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("li",{className:"clearfix",children:[Object(u.jsx)("div",{className:"message-data",children:Object(u.jsx)("span",{className:"message-data-time",children:n.date})}),Object(u.jsx)("div",{className:"message my-message",children:n.content})]})})};var g=function(e){var t=e.message,s=c.a.useState(t),a=Object(i.a)(s,2),n=a[0];return a[1],Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("li",{className:"clearfix",children:[Object(u.jsx)("div",{className:"message-data text-right",children:Object(u.jsx)("span",{style:{fontSize:10},className:"message-data-time",children:n.date})}),Object(u.jsx)("div",{style:{backgroundColor:"#86c541"},className:"message other-message float-right my-message",children:n.content})]})})};var v=function(e){var t=e.userFriend,s=e.index,a=c.a.useState(t),n=Object(i.a)(a,2),r=n[0];return n[1],Object(u.jsxs)("li",{onClick:function(){m()(".user-li".concat(s));m()(".user-li".concat(s)).toggleClass("active")},className:"clearfix user-li".concat(s),children:[Object(u.jsx)("img",{src:r.avatar,alt:"avatar"}),Object(u.jsxs)("div",{className:"about",children:[Object(u.jsx)("div",{className:"name",children:r.name}),Object(u.jsxs)("div",{className:"status",children:[Object(u.jsx)("i",{className:"fa fa-circle online"})," online"]})]})]})};var N=function(e){var t=e.user;return Object(u.jsxs)("div",{className:"col-lg-6",children:[Object(u.jsx)("a",{href:"javascript:void(0);","data-toggle":"modal","data-target":"#view_info",children:Object(u.jsx)("img",{src:t.avatar,alt:"avatar"})}),Object(u.jsxs)("div",{className:"chat-about",children:[Object(u.jsx)("h6",{className:"m-b-0",children:t.name}),Object(u.jsx)("small",{children:"Last seen: 2 hours ago"})]})]})};var y=function(){return Object(u.jsx)("div",{children:Object(u.jsxs)("button",{onClick:function(){localStorage.removeItem("jwt"),window.location.reload()},className:"btn btn-outline-danger",children:[Object(u.jsx)("img",{style:{width:"25px",padding:"5px"},src:"/images/logoff.png"}),"Log Off"]})})};var w=function(){var e=Object(a.useContext)(f).user,t=c.a.useState(e.id),s=Object(i.a)(t,2),n=(s[0],s[1],c.a.useState(null)),r=Object(i.a)(n,2),l=r[0],j=r[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{style:{position:"relative",left:"-20px"},children:Object(u.jsxs)("div",{className:"input-group mb-3",children:[Object(u.jsx)("div",{className:"input-group-prepend",children:Object(u.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"ID"})}),Object(u.jsx)("input",{onChange:function(e){return j(e.target.value)},type:"text",className:"form-control",placeholder:"User ID","aria-label":"Username","aria-describedby":"basic-addon1"}),Object(u.jsx)("button",{onClick:Object(d.a)(o.a.mark((function t(){var s,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8080/delete-user/"+l,{method:"POST",headers:{"Content-Type":"application/json"},body:e.id});case 2:return s=t.sent,t.next=5,s.json();case 5:"User deleted"===(a=t.sent).response?window.location.reload():alert(a.response);case 7:case"end":return t.stop()}}),t)}))),style:{margin:"0 10px 0 10px"},className:"btn btn-danger",children:"Remove"})]})})})};var S=function(){var e=c.a.useState(!1),t=Object(i.a)(e,2),s=t[0],a=t[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{children:Object(u.jsxs)("button",{onClick:function(){a(!s)},style:{margin:"0 10px 0 10px"},className:"btn btn-outline-warning",children:[Object(u.jsx)("img",{style:{width:"25px",padding:"2px",margin:"0 10px 0 0px"},src:"/images/remove.png"}),"Remove Friend"]})}),Object(u.jsx)("div",{style:{position:"absolute",top:"50px"},children:s?Object(u.jsx)(w,{}):Object(u.jsx)(u.Fragment,{})})]})};var C=function(){return Object(u.jsx)("div",{className:"col-lg-6 hidden-sm text-right",children:Object(u.jsxs)("div",{className:"d-flex flex-row-reverse",children:[Object(u.jsx)(y,{}),Object(u.jsx)(S,{})]})})},k=s(8),F=s(14),E=function e(t,s,a,c,n){Object(F.a)(this,e),this.id=t,this.content=s,this.MyUserID=a,this.date=c,this.userToID=n},U=(new E("","","","",""),new Date);U=U.toLocaleString("en-US",{dateStyle:"medium",timeStyle:"medium",hour12:!0});var D=function(e){e.messageData,e.setMessageData;var t=e.setMyFriend,s=e.myFriend,n=(e.setUser,Object(a.useContext)(f)),r=n.messages,l=n.currentFriend,o=n.setCurrentFriend,d=n.connection,j=n.user,m=n.friends,b=n.setFriends,x=Object(a.useState)(""),p=Object(i.a)(x,2),h=p[0],O=p[1],g=Object(a.useState)(j.id),v=Object(i.a)(g,2),N=v[0],y=v[1];return c.a.useEffect((function(){null!=d&&(d.onmessage=function(e){var a=JSON.parse(e.data);if(l.id===a.MyUserID){var c=l;c.messages.push(a),t(Object(k.a)(Object(k.a)({},s),{},{messages:c.messages}))}}),y(j.id)}),[N,d,j,m,b,o,l]),Object(u.jsxs)("div",{className:"chat-message clearfix",children:[r.map((function(e){return Object(u.jsx)("h1",{children:e})})),Object(u.jsxs)("div",{className:"input-group mb-0",children:[Object(u.jsx)("div",{className:"input-group-prepend",children:Object(u.jsx)("span",{className:"input-group-text",children:Object(u.jsx)("i",{className:"fa fa-send"})})}),Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter text here...",onKeyPress:function(e){var a=new E("001",h,N,U,l.id);if(a.date=U,a.content=e.target.value,a.userToID=l.id,a.MyUserID=N,"Enter"===e.key){var c=l;c.messages.push(a),t(Object(k.a)(Object(k.a)({},s),{},{messages:c.messages})),d.send("request-send "+JSON.stringify(a)),e.target.value="",O("")}}})]})]})};var I=function(){return Object(u.jsxs)("div",{className:"input-group",children:[Object(u.jsx)("div",{className:"input-group-prepend",children:Object(u.jsx)("span",{className:"input-group-text",children:Object(u.jsx)("i",{className:"fa fa-search"})})}),Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"Search..."})]})};s(22);var R=function(e){var t=e.setVisibility,s=e.visibility,a=c.a.useContext(f).user,n=c.a.useState(a),r=Object(i.a)(n,2),l=r[0];r[1];var j,b={id:"",name:"",userName:"",messages:[],avatar:""};return j=function(){t(!s)},m()(document).mouseup((function(e){var t=m()("#prompt-add-user");t.is(e.target)||0!==t.has(e.target).length||j()})),Object(u.jsx)("div",{onClick:function(e){},children:Object(u.jsxs)("div",{id:"prompt-add-user",style:{position:"absolute"},children:[Object(u.jsx)("button",{onClick:function(){t(!s)},style:{borderRadius:"50%",position:"absolute",top:"-10px",right:"-10px"},className:"btn btn-danger",children:"X"}),Object(u.jsxs)("div",{style:{border:"3px solid gray"},className:"form",children:[Object(u.jsx)("div",{className:"title",children:"Add a user"}),Object(u.jsx)("div",{className:"subtitle",children:"Add your new friend"}),Object(u.jsxs)("div",{className:"input-container ic1",children:[Object(u.jsx)("input",{onChange:function(e){b.name=e.target.value},id:"firstname",className:"input",type:"text",placeholder:" "}),Object(u.jsx)("div",{className:"cut"}),Object(u.jsx)("label",{className:"placeholder",children:"Name"})]}),Object(u.jsxs)("div",{className:"input-container ic2",children:[Object(u.jsx)("input",{onChange:function(e){b.userName=e.target.value},id:"lastname",className:"input",type:"text",placeholder:" "}),Object(u.jsx)("div",{className:"cut"}),Object(u.jsx)("label",{className:"placeholder",children:"Username"})]}),Object(u.jsxs)("div",{className:"input-container ic2",children:[Object(u.jsx)("input",{onChange:function(e){b.id=e.target.value},id:"email",className:"input",type:"text",placeholder:" "}),Object(u.jsx)("div",{className:"cut"}),Object(u.jsx)("label",{className:"placeholder",children:"Friend ID"})]}),Object(u.jsxs)("button",{onClick:Object(d.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/add-friend/".concat(l.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});case 2:return a=e.sent,e.next=5,a.json();case 5:"Friend added"===e.sent.response&&window.location.reload(),t(!s);case 8:case"end":return e.stop()}}),e)}))),style:{position:"relative"},type:"text",className:"submit btn btn-danger",children:[Object(u.jsx)("img",{style:{height:28,position:"absolute",float:"left",left:"10px",filter:"invert(100%)",opacity:"0.9"},src:"/images/add2.png"}),"Add"]})]})]})})};var T=function(){var e,t=c.a.useState(!1),s=Object(i.a)(t,2),a=s[0],n=s[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{style:{position:"relative",top:"10px"},children:[Object(u.jsx)("button",(e={className:"addUser-btn",onClick:function(){n(!a),m()(".addUser-container").css({top:"-50px"}),m()(".addUser-container").animate({top:"50px"},"fast")}},Object(b.a)(e,"className","btn btn-link"),Object(b.a)(e,"children",Object(u.jsx)("img",{style:{height:28},src:"/images/add-button.png"})),e)),Object(u.jsx)("label",{style:{fontFamily:"Mali"},children:"add friend"})]}),Object(u.jsx)("div",{className:"addUser-container",style:{position:"absolute"},children:a&&Object(u.jsx)(R,{setVisibility:n,visibility:a})})]})};var P=function(){var e=Object(a.useContext)(f),t=e.user,s=e.id,n=e.setId,r=e.currentFriend,l=e.setCurrentFriend,j=c.a.useState(r),b=Object(i.a)(j,2),x=b[0],p=b[1],h=c.a.useState([]),y=Object(i.a)(h,2),w=y[0],S=y[1];return c.a.useEffect((function(){m()(".chat-history").animate({scrollTop:1e4},"slow")}),[s,n,x,p]),Object(u.jsx)("div",{children:Object(u.jsx)("div",{style:{position:"relative",top:"10vh"},className:"container",children:Object(u.jsx)("div",{className:"row clearfix ",children:Object(u.jsx)("div",{className:"col-lg-12",children:Object(u.jsxs)("div",{className:"card chat-app  chat-container",children:[Object(u.jsxs)("div",{id:"plist",className:"people-list",children:[Object(u.jsx)(I,{}),Object(u.jsx)(T,{}),Object(u.jsx)("ul",{className:"list-unstyled chat-list mt-2 mb-0",children:t.friends&&t.friends.map((function(e,s){return Object(u.jsx)("div",{onClick:Object(d.a)(o.a.mark((function s(){var a,c,n;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=localStorage.getItem("jwt"),s.next=3,fetch("http://localhost:8080/get-messages/".concat(a,"/").concat(t.id,"/").concat(e.id));case 3:return c=s.sent,s.next=6,c.json();case 6:n=s.sent,p(n),l(n);case 9:case"end":return s.stop()}}),s)}))),children:Object(u.jsx)(v,{userFriend:e})})}))})]}),Object(u.jsxs)("div",{className:"chat",children:[Object(u.jsx)("div",{className:"chat-header clearfix",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)(N,{user:t}),Object(u.jsx)(C,{})]})}),Object(u.jsx)("div",{className:"chat-history",children:Object(u.jsx)("ul",{className:"m-b-0  chat-box",children:x.messages&&x.messages.map((function(e){return e.userToID===t.id?Object(u.jsx)(O,{message:e}):Object(u.jsx)(g,{message:e})}))})}),Object(u.jsx)(D,{setMessageData:S,messageData:w,setMyFriend:p,myFriend:x})]})]})})})})})};s(11);var L={backgroundColor:"black",height:"200vh",top:-20,position:"relative"};var M=function(){var e=c.a.useState(""),t=Object(i.a)(e,2),s=t[0],a=t[1];return c.a.useEffect((function(){var e=localStorage.getItem("jwt");e&&a(e)}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{style:s?L:{},children:Object(u.jsxs)(h,{children:[s?Object(u.jsx)(P,{}):Object(u.jsx)(p,{}),Object(u.jsx)("div",{className:"container "})]})})})};r.a.render(Object(u.jsx)(M,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.57c83b85.chunk.js.map